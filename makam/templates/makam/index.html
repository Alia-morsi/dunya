{% extends "makam/base.html" %}
{% load staticfiles %}
{% load makam.inline %}

{% block extra_css %}
<link rel="stylesheet" type="text/css" href="{% static 'makam/css/index.css' %}" />
{% endblock %}
{% block title %}Makam index | {% endblock %}
{% block script %}
<script>
$( document ).ready(function() {
  $('#display-filters').click(function(){
    $('.modal-container').addClass('active');
    $('.change-filter')[0].click();
    return false;
  });
$('.modal-close').click(function(){
    $('.modal-container').removeClass('active');
    return false;
  });

  $(".change-filter").click(function() {
    $('.change-filter.active').removeClass('active');
    $(this).addClass('active'); 
    var url = $(this).attr('href');
     $.ajax(url, {dataType: "html", type: "GET",
       success: function(data, textStatus, xhr) {
         $(".modal-content").html(data);
         //$("#filterdialog").dialog("open");
       }, error: function(xhr, textStatus, errorThrown) {
         console.debug("xhr error " + textStatus);
         console.debug(errorThrown);
   
       }
     });

   return false;
  });
  $('.search-form>img').click(function(){
    $('#work-query').focus();
  });
});
</script>
<script src="{% static 'makam/js/works.js' %}"></script>
{% endblock%}

{% block wrap %}
<div id="app">
  <div >
    <div class="hero-container" >
      <div class="hero-title" >Dunya Makam</div>
      <div class="hero-description">Discover and analyze Turkish makam music with CompMusic technologies.</div>
    </div>
    <div class="search-container" >
      <div class="bg-image" >
      </div>
      <div class="search-form" >
        <img src="http://imgh.us/magnifying-glass.svg" >
        <form action="{% url 'work-list' %}">
          <input type="text" name="q" id="work-query" placeholder="Search for music" >
        </form>
        <a id="display-filters" href="#">
          <img src="http://imgh.us/gear_3.svg" >
        </a>
      </div>
    </div>
    <div class="modal-container">
      <div class="modal" >
        <div class="modal-title" >Advanced filtering</div>
        <div class="modal-close" >X</div>
        <div class="modal-nav" >
          <div class="modal-tab" >
            <a class="change-filter" href="/makam/filter/popup?performer=&form=&artist=&q=&makam=&usul=&elem=form">Musical form</a>
          </div>
          <div class="modal-tab" >
            <a class="change-filter" href="/makam/filter/popup?performer=&form=&artist=&q=&makam=&usul=&elem=usul">Usul</a>
          </div>
          <div class="modal-tab" >
            <a class="change-filter" href="/makam/filter/popup?performer=&form=&artist=&q=&makam=&usul=&elem=makam">Makam</a>
          </div>
          <div class="modal-tab" >
            <a class="change-filter" href="/makam/filter/popup?performer=&form=&artist=&q=&makam=&usul=&elem=artist">Lyricist/Composer</a>
          </div>
          <div class="modal-tab" >
            <a class="change-filter" href="/makam/filter/popup?performer=&form=&artist=&q=&makam=&usul=&elem=performer">Performer</a>
          </div>
        </div>
        <div class="modal-content">
        </div>
      </div>
    </div>
    <div class="tabs-container">
      <div class="tab-title" >
        <a href="/makam/overview" >Overview</a>
      </div>
      <div class="tab-title">
        <a href="/makam/stats" >Statistics</a>
      </div>
      <div class="tab-title">
        <a href="/makam/results" >Results</a>
      </div>
    </div>
  </div>
</div>

<div id="detail" class="hero-container">

</div>
{% endblock %}

