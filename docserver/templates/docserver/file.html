{% extends "dashboard/base.html" %}
{% block title %}{{document.title}}{% endblock %}

{% block wrap %}

<h2>
    <span class="breadcrumbs">
        <li><a href="{% url 'docserver-manager' %}">Module manager</a></li>
        <li><a href="{{document.collection.get_absolute_url}}">{{document.collection.name}}</a></li>
        <li>Module {{modulever.module.name}} {{modulever.version}}</li>
        <li>{{document.title}}</li>
    </span>
</h2>

    {% if document.sourcefiles.all %}
        <h3>Source files</h3>
        {% for f in document.sourcefiles.all %}
        <li><a href="{{f.get_absolute_url}}">{{f.document.title}} ({{f.file_type.extension}})</a>
        {% endfor %}
    {% endif %}

    {% if thisderived %}
        <h3>Derived file</h3>
        <li><a href="{{thisderived.get_absolute_url}}">{{thisderived.document.title}}</a>
    {% endif %}

    {% if outputs %}
        <h3>All derived files</h3>
        {% for m, vs in outputs.items %}
        <li>{{m.name}} ({% for v in vs %}<a href="{{v.get_absolute_url}}">{{v.version}}</a>, {% endfor %})
        {% endfor %}
    {% endif %}

    <div class="topbox">
        <div class="topheader">Logs</div>
    <table> 
        <tr>
            <th style="width:150px;">Date</th>
            <th style="width:150px;">Module</th>
            <th style="width:100px;">Level</th>
            <th>Message</th>
        </tr>
        {% for l in document.logs.all %}
        <tr>
            <td>{{l.datetime}}</td>
            <td>{{l.moduleversion.module.name}} ({{l.moduleversion.version}})</td>
            <td>{{l.level}}</td>
            <td>{{l.message}}</td>
        </tr>
        {% endfor %}
    </table>
    </div>

{% endblock %}

