{% extends "carnatic/base.html" %}
{% load inline %}
{% load badges %}
{% load staticfiles %}

{% block script %}
<script>
$(document).ready(function() {
    parseAllFilters({{ filter_items|safe }});
});
</script>

<script src="{% static 'carnatic/js/browse.js' %}"></script>
{% endblock %}

{% block title %}{% if query %}{{query}} - {% endif %}{% endblock %}

{% block wrap %}

<div class="main-container">

    <div id="filterMask">
	    <div id="filterArea">

	    	<div id="entitiesList" class="filterList">
	        	<ul></ul>
	    	</div>

	    	<div id="breadcrumb">
	    	</div>

	    </div>

     </div>

	 <div id="tab">
		<div id="tabControl"></div>
	</div>

	 <div id="resultsstats">
        <table>
        	<tbody><tr>
        		<td>
				    <div id="queryCont">
				    		<span>Query</span>
						<div id="query" class="shadow1" onClick="$('#results').isotope({ filter: '*' });">
						</div>
					 </div>
	 			</td>
                <td class="artist" onClick="$('#results').isotope({ filter: '.artist' });"><span>{{numartists}}</span> <b>Artists</b></td>
                <td class="concert" onClick="$('#results').isotope({ filter: '.concert' });"><span>{{numconcerts}}</span> <b>Concerts</b></td>
                <td class="work" onClick="$('#results').isotope({ filter: '.work' });"><span>{{numworks}}</span> <b>Compositions</b></td>
                <td class="instrument" onClick="$('#results').isotope({ filter: '.instrument' });"><span>{{numinstruments}}</span> <b>Instruments</b></td>
                <td class="raaga" onClick="$('#results').isotope({ filter: '.raaga' });"><span>{{numraagas}}</span> <b>Raagas</b></td>
                <td class="taala" onClick="$('#results').isotope({ filter: '.taala' });"><span>{{numtaalas}}</span> <b>Taalas</b></td>
                <td class="composer" onClick="$('#results').isotope({ filter: '.composer' });"><span>{{numcomposers}}</span> <b>Composers</b></td>
        	</tr>
        </tbody></table>
     </div>
     {% if results %}
        <h2 class="resultsTitle">Query results:</h2>
     {% else %}
         <h2 class="resultsTitle">Some items from our collection:</h2>
     {% endif %}
     <div id="results">

        {% for c in concerts %}
            {% badge_concert c %}
        {% endfor %}

        {% for a in artists %}
            {% badge_artist a %}
        {% endfor %}

        {% for r in raagas %}
            {% badge_raaga r %}
        {% endfor %}

        {% for t in taalas %}
            {% badge_taala t %}
        {% endfor %}

        {% for i in instruments %}
            {% badge_instrument i %}
        {% endfor %}
     </div>
    </div>

{% endblock %}
