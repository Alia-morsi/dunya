{% extends "dashboard/base.html" %}

{% block wrap %}

<h2>
    <span class="breadcrumbs">Release
        <li><a href="{{release.collection.get_absolute_url}}">{{release.collection.name}}</a></li>
        <li>{{release.title}}</li>
    </span>
</h2>

<div class="topbox">
    <div class="topheader">Info</div>
    <li>Directory: 
    {% for d in release.collectiondirectory_set.all %}
    {{d.full_path}}{% if not forloop.last %},{% endif %}
    {% endfor %}
</div>

<div class="topbox">
    <div class="topheader">Actions</div>
    <li><a href="?reimport">Reimport release</a>
</div>

<div class="topbox">
    <div class="topheader">Current state</div>
    {{release.get_current_state}}
</div>

<table><tr><th>File</th><th>Status</th></tr>
    {% for d in files %}
    <tr><th>{{d.path}}</th><th></th></tr>
    {% for f in d.get_file_list %}
    <tr><td><a href="{{f.get_absolute_url}}">{{f.name}}</a></td><td>{{f.get_current_state}}</td></tr>
    {% endfor %}
    {% endfor %}
</table>

<div class="topbox">
    <div class="topheader">Release-specific checks</div>
<table>
    <tr><th>Checker</th><th>Status</th></tr>
    {% for r in finishedtest %}
    <tr><td>({{r.checker.id}}) {{r.checker.checker.name}}</td><td>
            <img src="/static/dashboard/img/{{r.checker.get_status_icon}}" title="{{r.checker.get_status_desc}}" />
            </td></tr>
            {% if r.template %}
    <tr><td colspan="2">
            {% with "dashboard/jobs/"|add:r.template as template %}
            {% include template with data=r.data only %}
            {% endwith %}
            {% endif %}
    </td></tr>
    {% endfor %}
</table>
</div>

{% include "dashboard/log.html" with logs=log_messages %}

{% endblock %}

